/* style.css */

/* --- Theme Variables --- */
:root {
  /* Dark Theme (Default) */
  --primary-bg-dark: #1A1A1A;
  --secondary-bg-dark: #2C2C2C;
  --panel-bg-dark: rgba(44, 44, 44, 0.6); /* Slightly less transparent */
  --panel-border-dark: rgba(255, 255, 255, 0.15);
  --text-dark: #FFFFFF;
  --muted-text-dark: #BDBDBD;
  --accent-blue-dark: #3498DB;
  --accent-orange-dark: #FF9900;
  --input-text-dark: var(--accent-orange-dark);
  --placeholder-text-dark: rgba(255, 153, 0, 0.7);
  --link-dark: var(--accent-blue-dark);
  --button-text-dark: #FFFFFF;
  --button-gradient-dark: linear-gradient(45deg, rgba(52,152,219,0.8), rgba(255,153,0,0.8));
  --button-hover-border-dark: var(--accent-orange-dark);
  --shadow-dark: rgba(0, 0, 0, 0.3);
  --scrollbar-thumb-dark: var(--accent-blue-dark);
  --scrollbar-track-dark: rgba(0, 0, 0, 0.3);

  /* Light Theme */
  --primary-bg-light: #F4F4F4;
  --secondary-bg-light: #FFFFFF;
  --panel-bg-light: rgba(255, 255, 255, 0.7);
  --panel-border-light: rgba(0, 0, 0, 0.1);
  --text-light: #333333;
  --muted-text-light: #777777;
  --accent-blue-light: #2980B9;
  --accent-orange-light: #E67E22;
  --input-text-light: var(--accent-orange-light);
  --placeholder-text-light: rgba(230, 126, 34, 0.7);
  --link-light: var(--accent-blue-light);
  --button-text-light: #FFFFFF;
  --button-gradient-light: linear-gradient(45deg, rgba(41,128,185,0.9), rgba(230,126,34,0.9));
  --button-hover-border-light: var(--accent-orange-light);
  --shadow-light: rgba(0, 0, 0, 0.1);
  --scrollbar-thumb-light: var(--accent-blue-light);
  --scrollbar-track-light: rgba(0, 0, 0, 0.1);

  /* Shared Variables */
  --font-family: 'Roboto Mono', monospace;
  --base-font-size: 16px;
  --line-height: 1.5;
  --max-width: 1200px;
  --gutter: 24px;
  --spacing-small: 8px;
  --spacing-medium: 16px;
  --spacing-large: 32px;
  --icon-size: 24px;
  --border-radius: 6px; /* Consistent border radius */
}

/* Base Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  font-size: var(--base-font-size);
  overflow: hidden;
  height: 100%;
  width: 100%;
}

body {
  font-family: var(--font-family);
  line-height: var(--line-height);
  background-color: var(--primary-bg-dark); /* Default to dark */
  color: var(--text-dark); /* Default to dark */
  margin: 0;
  height: 100%;
  width: 100%;
  overflow: hidden;
  position: fixed;
  transition: background-color 0.3s ease, color 0.3s ease; /* Smoother transition */
}

/* Container */
.container {
  max-width: var(--max-width);
  margin: 0 auto;
  padding: var(--gutter);
}

/* Typography & Headings */
h1, h2, h3, h4 {
  font-family: var(--font-family);
  font-weight: bold;
}
h1 { font-size: 32px; margin-bottom: var(--spacing-medium); }
h2 { font-size: 28px; margin-bottom: var(--spacing-medium); }
h3 { font-size: 24px; margin-bottom: var(--spacing-small); }
h4 { font-size: 20px; margin-bottom: var(--spacing-small); }

/* Glass Panels (Dark Default) */
.glass-panel {
  background: var(--panel-bg-dark); /* Use theme variable */
  backdrop-filter: blur(8px); /* Slightly less blur */
  box-shadow: 0 4px 8px var(--shadow-dark); /* Use theme variable */
  border: 1px solid var(--panel-border-dark); /* Add subtle border */
  border-radius: var(--border-radius); /* Use consistent radius */
  padding: var(--spacing-medium);
  margin-bottom: var(--spacing-large);
  transition: background-color 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
}

/* Unified Header Layout (Dark Default) */
.page-wrapper {
  display: flex; /* Use flexbox for overall page structure */
  flex-direction: column;
  height: 100vh; /* Use viewport height */
  width: 100%;
  overflow: hidden; /* Prevent body scroll */
  position: relative; /* Change from absolute */
}

.unified-header {
  display: flex;
  flex-direction: column;
  padding: 0;
  background-color: var(--secondary-bg-dark); /* Use theme variable */
  transition: background-color 0.3s ease;
}

.header-top-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
}

.header-left,
.header-right {
  display: flex;
  align-items: center;
  gap: 16px;
}

/* Removed .header-recipe-list and .recipe-list-horizontal styles */

.main-content {
  flex: 1;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start;
  justify-content: space-between;
  gap: var(--spacing-large);
  overflow-y: auto;
  overflow-x: hidden;
  padding: 16px;
  background-color: var(--primary-bg-dark); /* Use theme variable */
  height: 100%; /* This might be problematic if header grows */
  transition: background-color 0.3s ease;
}

/* Sidebar Panels (Dark Default) */
aside.glass-panel {
  flex: 1 1 300px;
  max-width: 300px;
  background-color: var(--secondary-bg-dark); /* Use theme variable */
  padding: var(--spacing-medium);
  border-radius: var(--border-radius); /* Use consistent radius */
}

/* Theme Select (Dark Default) */
.theme-select {
  font-family: var(--font-family);
  background-color: var(--secondary-bg-dark); /* Use theme variable */
  color: var(--text-dark); /* Use theme variable */
  border: 1px solid var(--accent-blue-dark); /* Use theme variable */
  border-radius: var(--border-radius); /* Use consistent radius */
  padding: 8px 12px;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* Buttons - Simplified Solid Background (Dark Theme Default) */
.btn {
  display: inline-block;
  padding: 10px 15px; /* Adjusted padding for potentially wrapped text */
  border: 1px solid transparent; /* Transparent border initially */
  border-radius: var(--border-radius); /* Use consistent radius */
  cursor: pointer;
  font-size: 0.95em;
  font-family: var(--font-family);
  background: var(--button-gradient-dark); /* Use theme variable */
  color: var(--button-text-dark); /* Use theme variable */
  transition: border-color 0.3s ease, filter 0.3s ease, background 0.3s ease, color 0.3s ease; /* Added background */
  font-weight: bold;
  text-align: center;
  white-space: normal;
  word-wrap: break-word;
  vertical-align: middle;
  line-height: 1.2;
}
.btn:hover {
  border-color: var(--button-hover-border-dark); /* Use theme variable */
  filter: brightness(1.1);
  color: var(--button-text-dark); /* Use theme variable */
}
.btn:focus-visible {
  outline: 2px solid var(--accent-orange-dark); /* Use theme variable */
  outline-offset: 2px;
}
/* Add specific styles for different button types if needed later */

/* ===================== */
/* Phase 4 - Action Styling */
/* ===================== */

/* Base action button */
.action-button {
  padding: 10px 15px;
  font-family: var(--font-family);
  font-weight: bold;
  border-radius: var(--border-radius);
  cursor: pointer;
  transition: all 0.3s ease;
  border: 1px solid transparent;
  white-space: normal;
  word-wrap: break-word;
  display: inline-block;
  margin: 4px;
}

/* Primary action */
.primary-action {
  background: var(--accent-blue-dark);
  color: #fff;
  border-color: var(--accent-blue-dark);
}
.primary-action:hover {
  filter: brightness(1.1);
}

/* Secondary action */
.secondary-action {
  background: var(--secondary-bg-dark);
  color: var(--accent-blue-dark);
  border: 1px solid var(--accent-blue-dark);
}
.secondary-action:hover {
  background: var(--accent-blue-dark);
  color: #fff;
}

/* Utility action */
.utility-action {
  background: transparent;
  color: var(--muted-text-dark);
  border: 1px dashed var(--muted-text-dark);
}
.utility-action:hover {
  background: var(--panel-bg-dark);
  color: #fff;
}

/* Action group container */
.action-group {
  margin-bottom: var(--spacing-medium);
  padding: var(--spacing-small);
  border-radius: var(--border-radius);
  border: 1px solid var(--panel-border-dark);
  background-color: var(--panel-bg-dark);
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-small);
}

/* Expandable action container */
.expandable-action {
  width: 100%;
}

.expand-toggle {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--secondary-bg-dark);
  color: var(--text-dark);
  padding: 8px 12px;
  font-weight: bold;
  border-radius: var(--border-radius);
  cursor: pointer;
  transition: background-color 0.3s ease;
  border: 1px solid var(--panel-border-dark);
  margin-bottom: 4px;
}

.expand-toggle:hover {
  background-color: var(--panel-bg-dark);
}

.expand-icon {
  transition: transform 0.3s ease;
}

.expandable-action[aria-expanded="true"] .expand-icon {
  transform: rotate(90deg);
}

.sub-actions {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: max-height 0.3s ease, opacity 0.3s ease, padding 0.3s ease;
  padding: 0 8px;
}

.expandable-action[aria-expanded="true"] .sub-actions {
  max-height: 500px;
  opacity: 1;
  padding: 8px;
}

/* Responsive tweaks */
@media (max-width: 600px) {
  .action-group {
    flex-direction: column;
  }
}

/* Logo Text Gradient */
#logoText {
  background: var(--button-gradient-dark); /* Use theme variable for consistency */
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  /* Inherits font-family, font-size, font-weight from inline style or body */
}

/* Header Button Specific Style (Gradient Text) */
.btn-header {
  /* background: none !important; /* Removed - Gradient is needed for text */
  border: none; /* Remove border */
  padding: 10px 0; /* Adjust padding if needed */
  background: var(--button-gradient-dark); /* Use theme variable for gradient */
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-weight: bold; /* Ensure it's readable */
}
.btn-header:hover {
  filter: brightness(1.2); /* Make gradient brighter on hover */
}

/* Vertical Recipe List (for Left Column) */
.recipe-list-vertical {
  list-style: none;
  padding: 0;
  margin: 0;
  max-height: 400px; /* Adjust as needed */
  overflow-y: auto;
}
.recipe-list-vertical .recipe-item {
  display: block; /* Stack items vertically */
  margin-bottom: var(--spacing-small); /* Space between items */
}
 
/* Recipe/Ingredient Items - Simpler Styling */
.recipe-item,
.ingredient-item { /* Combined for now, might need separation later */
  display: inline-block;
  padding: 6px 12px; /* Smaller padding */
  background-color: var(--secondary-bg-dark); /* Use theme variable */
  border: 1px solid var(--accent-blue-dark); /* Use theme variable */
  border-radius: var(--border-radius); /* Use consistent radius */
  cursor: pointer;
  font-size: 0.9em;
  font-family: var(--font-family);
  color: var(--accent-blue-dark); /* Use theme variable */
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
  margin: 4px; /* Add small margin */
}
.recipe-item:hover,
.ingredient-item:hover {
  background-color: var(--accent-blue-dark); /* Use theme variable */
  color: var(--primary-bg-dark); /* Use theme variable */
  border-color: var(--accent-blue-dark); /* Use theme variable */
}
/* Style for the currently selected recipe */
.recipe-item.selected {
  background-color: var(--accent-orange-dark); /* Use theme variable */
  color: var(--primary-bg-dark); /* Use theme variable */
  border-color: var(--accent-orange-dark); /* Use theme variable */
  font-weight: bold;
}
.recipe-item:focus-visible,
.ingredient-item:focus-visible {
  outline: 2px solid var(--accent-orange-dark); /* Use theme variable */
  outline-offset: 1px;
  background-color: var(--accent-blue-dark); /* Use theme variable */
  color: var(--primary-bg-dark); /* Use theme variable */
  border-color: var(--accent-blue-dark); /* Use theme variable */
}

/* Secondary Action Button (Inherits .btn styles) */
/* .secondary-btn ruleset removed as it was empty */

/* Input Fields (Dark Default) */
input,
textarea,
select { /* Added select here */
  background-color: var(--secondary-bg-dark); /* Use theme variable */
  color: var(--input-text-dark); /* Use theme variable */
  border: 1px solid var(--accent-blue-dark); /* Use theme variable */
  border-radius: var(--border-radius); /* Use consistent radius */
  padding: 8px 12px;
  font-family: var(--font-family);
  outline: none;
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
  appearance: none; /* Remove default browser styling */
  -webkit-appearance: none; /* For Safari/Chrome */
  -moz-appearance: none; /* For Firefox */
}
::placeholder {
  color: var(--placeholder-text-dark); /* Use theme variable */
  opacity: 1; /* Let variable control opacity */
  transition: color 0.3s ease;
}
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 2px solid var(--accent-orange-dark); /* Use theme variable */
  outline-offset: 2px;
  border-color: var(--accent-orange-dark); /* Use theme variable */
}

/* Table Cells (Dark Default) */
.container table th,
.container table td {
  background-color: var(--secondary-bg-dark); /* Use theme variable */
  color: var(--text-dark); /* Use theme variable */
  border: 1px solid var(--panel-border-dark); /* Use theme variable */
}

/* ========================= */
/* Collapsible Enhancements  */
/* ========================= */

/* Collapsible Container */
.collapsible-container {
  border: 1px solid var(--panel-border-dark); /* Use theme variable */
  border-radius: var(--border-radius); /* Use consistent radius */
  margin-bottom: var(--spacing-medium);
  overflow: hidden;
  transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease, background-color 0.3s ease;
  box-shadow: 0 1px 3px var(--shadow-dark); /* Use theme variable */
}

.collapsible-container:hover {
  box-shadow: 0 2px 5px var(--shadow-dark); /* Use theme variable */
}

/* Color-coding for collapsible containers */
.collapsible-container[data-color="blue"] {
  border-left: 3px solid var(--accent-blue-dark); /* Use theme variable */
  background-color: rgba(52, 152, 219, 0.05); /* Keep subtle bg */
}

.collapsible-container[data-color="orange"] {
  border-left: 3px solid var(--accent-orange-dark); /* Use theme variable */
  background-color: rgba(255, 153, 0, 0.05); /* Keep subtle bg */
}

.collapsible-container[data-color="neutral"] {
  border-left: 3px solid var(--muted-text-dark); /* Use theme variable */
  background-color: rgba(189, 189, 189, 0.05); /* Keep subtle bg */
}

/* Collapsible Header */
.collapsible-header {
  width: 100%;
  background-color: var(--secondary-bg-dark); /* Use theme variable */
  color: var(--text-dark); /* Use theme variable */
  font-family: var(--font-family);
  font-size: 1em;
  padding: var(--spacing-small) var(--spacing-medium);
  text-align: left;
  border: none;
  outline: none;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  transition: background-color 0.3s ease-in-out;
}

/* Color-coding for headers */
.collapsible-container[data-color="blue"] .collapsible-header {
  color: var(--accent-blue-dark); /* Use theme variable */
}

.collapsible-container[data-color="orange"] .collapsible-header {
  color: var(--accent-orange-dark); /* Use theme variable */
}

.collapsible-header:hover,
.collapsible-header:focus {
  background-color: var(--panel-bg-dark); /* Use theme variable */
}

.collapsible-icon {
  display: inline-block;
  transition: transform 0.3s ease-in-out;
}

.collapsible-container[aria-expanded="true"] .collapsible-icon {
  transform: rotate(90deg);
}
/* Hide content by default */
.collapsible-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease-in-out, padding 0.3s ease-in-out, opacity 0.3s ease-in-out;
  padding: 0 var(--spacing-medium);
  opacity: 0;
}

/* Show content when expanded */
.collapsible-container[aria-expanded="true"] .collapsible-content {
  padding: var(--spacing-small) var(--spacing-medium);
  max-height: 1000px; /* Large enough to fit content */
  opacity: 1;
}

/* Add a subtle animation when expanding/collapsing */
.collapsible-container[aria-expanded="true"] {
  transform: translateY(0);
}

.collapsible-container[aria-expanded="false"] {
  transform: translateY(0);
}

/* Accessibility focus outline */
.collapsible-header:focus-visible {
  outline: 2px solid var(--accent-blue-dark); /* Use theme variable */
  outline-offset: 2px;
}

/* Collapsible Group Controls */
.collapsible-group {
  margin-bottom: var(--spacing-large);
}

.btn-expand-collapse {
  display: flex;
  align-items: center;
  gap: 8px;
  background: none;
  border: none;
  color: var(--text-dark); /* Use theme variable */
  font-family: var(--font-family);
  font-size: 0.9em;
  cursor: pointer;
  padding: 4px 8px;
  margin-bottom: var(--spacing-small);
  border-radius: 4px;
  transition: background-color 0.3s ease-in-out;
}

.btn-expand-collapse:hover {
  background-color: var(--panel-bg-dark); /* Use theme variable */
}

.btn-expand-collapse .icon {
  font-size: 1.2em;
  transition: transform 0.3s ease-in-out;
  display: inline-block;
  width: 20px;
  height: 20px;
  text-align: center;
  line-height: 20px;
}

.btn-expand-collapse[aria-pressed="true"] .icon {
  transform: rotate(45deg);
}

.btn-expand-collapse .label {
  position: relative;
  transition: color 0.3s ease;
}

.btn-expand-collapse:hover .label {
  color: var(--accent-blue-dark); /* Use theme variable */
}

/* ========================= */
/* Responsive 3-Column Layout */
/* ========================= */
.content-grid {
  display: grid;
  /* Fixed sidebars, flexible middle */
  grid-template-columns: minmax(250px, 1fr) 3fr minmax(250px, 1fr);
  gap: var(--spacing-medium); /* Reduced gap */
  padding: var(--spacing-medium); /* Reduced padding */
  max-width: var(--max-width);
  margin: 0 auto;
  flex: 1; /* Takes remaining height in page-wrapper */
  overflow: hidden; /* Prevent grid itself from scrolling */
  height: 100%; /* Fill the flex container */
  transition: all 0.3s ease;
}

.left-column,
.middle-column,
.right-column {
  background-color: var(--secondary-bg-dark); /* Use theme variable */
  padding: var(--spacing-medium);
  border-radius: var(--border-radius); /* Use consistent radius */
  transition: all 0.3s ease;
  overflow-y: auto;
  overflow-x: hidden;
  height: 100%; /* This might be problematic if header grows */
  max-height: 100%; /* This might be problematic if header grows */
  min-width: 250px;
  flex-grow: 1;
  display: block;
}

/* Clear visual separation with color-coding */
.left-column {
  border: 1px solid var(--panel-border-dark); /* Use theme variable */
  border-top: 3px solid var(--accent-blue-dark); /* Use theme variable */
  box-shadow: 0 2px 8px var(--shadow-dark); /* Use theme variable */
  background-color: rgba(52, 152, 219, 0.05); /* Keep subtle bg */
}
.middle-column {
  border: 1px solid var(--panel-border-dark); /* Use theme variable */
  border-top: 3px solid var(--accent-blue-dark); /* Use theme variable */
  box-shadow: 0 2px 8px var(--shadow-dark); /* Use theme variable */
  background-color: rgba(52, 152, 219, 0.03); /* Keep subtle bg */
}
.right-column {
  border: 1px solid var(--panel-border-dark); /* Use theme variable */
  border-top: 3px solid var(--accent-orange-dark); /* Use theme variable */
  box-shadow: 0 2px 8px var(--shadow-dark); /* Use theme variable */
  background-color: rgba(255, 153, 0, 0.03); /* Keep subtle bg */
}

/* Responsive stacking on smaller screens */
/* Stack columns on smaller screens */
@media (max-width: 900px) { /* Adjusted breakpoint */
  .content-grid {
    grid-template-columns: 1fr; /* Single column */
    overflow-y: auto; /* Allow grid to scroll */
    height: 100%; /* Ensure it tries to fill */
    padding: var(--spacing-small); /* Less padding */
  }
  .left-column,
  .middle-column,
  .right-column {
    height: auto; /* Allow content height */
    max-height: none; /* Remove max-height */
    margin-bottom: var(--spacing-medium); /* Reduced margin */
    overflow-y: visible; /* Let content flow */
  }
  /* Hide right column by default on smallest screens if needed */
  /* .right-column { display: none; } */
}

/* Additional responsive breakpoint for tablets */
/* Optional: Tablet layout adjustments (Example: 2 columns) */
@media (min-width: 901px) and (max-width: 1100px) {
  .content-grid {
    grid-template-columns: 1fr 2fr; /* Example: Left and Middle */
    grid-template-areas:
      "left middle"
      "right middle"; /* Right column below left */
     gap: var(--spacing-small);
  }
   .left-column { grid-area: left; }
   .middle-column { grid-area: middle; }
   .right-column { grid-area: right; }
}
/* Ensure columns can scroll independently */
.left-column, .middle-column, .right-column {
  overflow-y: auto;
}

/* Smooth transitions */
.content-grid,
.left-column,
.middle-column,
.right-column {
  transition: all 0.3s ease-in-out;
}

/* Section Titles */
.section-title {
  font-size: 1.2em;
  margin-bottom: var(--spacing-small);
  color: var(--text-dark); /* Use theme variable */
}

/* Ingredients Container */
.ingredients-container {
  margin-bottom: var(--spacing-large);
  padding: var(--spacing-small);
  background-color: var(--panel-bg-dark); /* Use theme variable */
  border-radius: var(--border-radius); /* Use consistent radius */
  border-left: 3px solid var(--accent-blue-dark); /* Use theme variable */
}

.ingredient-list {
  list-style: none;
  padding: 0;
  margin: 0;
  max-height: 300px;
  overflow-y: auto;
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: var(--scrollbar-thumb-dark) var(--scrollbar-track-dark); /* Firefox */
}

.ingredient-list::-webkit-scrollbar {
  width: 6px;
}

.ingredient-list::-webkit-scrollbar-track {
  background: var(--scrollbar-track-dark); /* Use theme variable */
  border-radius: 3px;
}

.ingredient-list::-webkit-scrollbar-thumb {
  background-color: var(--scrollbar-thumb-dark); /* Use theme variable */
  border-radius: 3px;
}

/* Quick Stats */
.quick-stats-container {
  margin-bottom: var(--spacing-large);
  padding: var(--spacing-small);
  background-color: var(--panel-bg-dark); /* Use theme variable */
  border-radius: var(--border-radius); /* Use consistent radius */
  border-left: 3px solid var(--accent-orange-dark); /* Use theme variable */
}

.quick-stats {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--spacing-small);
}

.stat-item {
  display: flex;
  flex-direction: column;
  padding: var(--spacing-small);
  background-color: var(--secondary-bg-dark); /* Use theme variable */
  border-radius: 4px;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.stat-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 2px 5px var(--shadow-dark); /* Use theme variable */
}

.stat-label {
  font-size: 0.8em;
  color: var(--muted-text-dark); /* Use theme variable */
}

.stat-value {
  font-size: 1em;
  font-weight: bold;
  color: var(--accent-blue-dark); /* Use theme variable */
}

/* Instructions Summary */
.instructions-summary {
  margin-bottom: var(--spacing-large);
  padding: var(--spacing-medium);
  background-color: var(--secondary-bg-dark); /* Use theme variable */
  border-radius: var(--border-radius); /* Use consistent radius */
  border-left: 3px solid var(--accent-blue-dark); /* Use theme variable */
  box-shadow: 0 2px 5px var(--shadow-dark); /* Use theme variable */
}

.summary-content {
  line-height: 1.6;
  padding: var(--spacing-small);
  background-color: var(--panel-bg-dark); /* Use theme variable */
  border-radius: 4px;
}

/* Ingredient Item Styling */
.ingredient-item {
  transition: background-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
  margin-bottom: 5px;
  border-radius: 4px;
}

.ingredient-item:hover {
  background-color: rgba(52, 152, 219, 0.1) !important; /* Keep specific hover */
  box-shadow: 0 2px 4px var(--shadow-dark); /* Use theme variable */
  transform: translateY(-1px);
}

.ingredient-item.expanded {
  background-color: rgba(52, 152, 219, 0.05); /* Keep specific expanded */
  box-shadow: 0 2px 5px var(--shadow-dark); /* Use theme variable */
  border-left: 2px solid var(--accent-blue-dark); /* Use theme variable */
}

.ingredient-details {
  transition: max-height 0.3s ease, opacity 0.3s ease;
  opacity: 0;
}

.ingredient-item.expanded .ingredient-details {
  opacity: 1;
}

/* Recipe Header Section */
.recipe-header-section {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: var(--spacing-medium);
  margin: 0 auto var(--spacing-large) auto;
  max-width: var(--max-width);
  padding: var(--spacing-medium);
  background: linear-gradient(to right, rgba(52, 152, 219, 0.1), rgba(255, 153, 0, 0.1)); /* Keep specific gradient */
  backdrop-filter: blur(8px); /* Match glass panel */
  border-radius: var(--border-radius); /* Use consistent radius */
  box-shadow: 0 4px 8px var(--shadow-dark); /* Use theme variable */
  border: 1px solid var(--panel-border-dark); /* Use theme variable */
  border-bottom: 2px solid var(--panel-border-dark); /* Use theme variable */
}

.recipe-actions {
  display: flex;
  gap: 8px;
}

.btn-small {
  padding: 6px 12px;
  font-size: 0.8em;
  opacity: 0.7;
}

/* Smaller input variant for header */
.input-small {
  padding: 6px 10px; /* Reduced padding */
  font-size: 0.85em; /* Smaller font */
}
 
/* Iteration Management Styles */
.iteration-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-medium);
}

.iterations-list {
  max-height: 200px;
  overflow-y: auto;
  margin-bottom: var(--spacing-medium);
  border: 1px solid var(--panel-border-dark); /* Use theme variable */
  border-radius: 4px;
  padding: var(--spacing-small);
}

.new-iteration-form {
  background-color: var(--panel-bg-dark); /* Use theme variable */
  border-radius: var(--border-radius); /* Use consistent radius */
  padding: var(--spacing-medium);
  margin-top: var(--spacing-medium);
  border: 1px solid var(--accent-orange-dark); /* Use theme variable */
}

.new-iteration-form h4 {
  margin-top: 0;
  color: var(--accent-orange-dark); /* Use theme variable */
}

.form-group {
  margin-bottom: var(--spacing-medium);
}

.form-group label {
  display: block;
  margin-bottom: var(--spacing-small);
  font-weight: bold;
}

.form-group textarea {
  width: 100%;
  min-height: 80px;
  background-color: var(--secondary-bg-dark); /* Use theme variable */
  color: var(--text-dark); /* Use theme variable */
  border: 1px solid var(--panel-border-dark); /* Use theme variable */
  border-radius: var(--border-radius); /* Use consistent radius */
  padding: var(--spacing-small);
}

.form-actions {
  display: flex;
  gap: var(--spacing-small);
  justify-content: flex-end;
}

.btn-primary {
  background-color: rgba(52, 152, 219, 0.2); /* Keep specific */
  border: 1px solid var(--accent-blue-dark); /* Use theme variable */
}

.btn-secondary {
  background-color: var(--panel-bg-dark); /* Use theme variable */
  border: 1px solid var(--panel-border-dark); /* Use theme variable */
}

/* Ingredient item styling improvements */
.ingredient-item {
  display: flex;
  flex-direction: column;
  padding: var(--spacing-small);
  background-color: var(--secondary-bg-dark); /* Use theme variable */
  border-radius: 4px;
  margin-bottom: var(--spacing-small);
  transition: all 0.2s ease;
}

.ingredient-summary {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.btn-small:hover {
  opacity: 1;
}

.recipe-title {
  font-size: 1.8em;
  color: var(--text-dark); /* Use theme variable */
  text-shadow: 0 1px 2px var(--shadow-dark); /* Use theme variable */
  margin: 0;
  background: linear-gradient(45deg, var(--accent-blue-dark), var(--accent-orange-dark)); /* Use theme variable */
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* Optional: style the remove button specifically if needed */
.remove-recipe-btn {
  /* inherits .btn styles */
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.remove-recipe-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 2px 5px var(--shadow-dark); /* Use theme variable */
}

/* --- Light Theme Overrides --- */
body.light {
  --primary-bg: var(--primary-bg-light);
  --secondary-bg: var(--secondary-bg-light);
  --panel-bg: var(--panel-bg-light);
  --panel-border: var(--panel-border-light);
  --text: var(--text-light);
  --muted-text: var(--muted-text-light);
  --accent-blue: var(--accent-blue-light);
  --accent-orange: var(--accent-orange-light);
  --input-text: var(--input-text-light);
  --placeholder-text: var(--placeholder-text-light);
  --link: var(--link-light);
  --button-text: var(--button-text-light);
  --button-gradient: var(--button-gradient-light);
  --button-hover-border: var(--button-hover-border-light);
  --shadow: var(--shadow-light);
  --scrollbar-thumb: var(--scrollbar-thumb-light);
  --scrollbar-track: var(--scrollbar-track-light);

  background-color: var(--primary-bg);
  color: var(--text);
}

body.light .glass-panel {
  background: var(--panel-bg);
  box-shadow: 0 4px 8px var(--shadow);
  border: 1px solid var(--panel-border);
}

body.light .unified-header {
  background-color: var(--secondary-bg);
}

/* Removed body.light .header-recipe-list */

body.light .main-content {
  background-color: var(--primary-bg);
}

body.light aside.glass-panel {
  background-color: var(--secondary-bg);
}

body.light .theme-select {
  background-color: var(--secondary-bg);
  color: var(--text);
  border: 1px solid var(--accent-blue);
}

body.light .btn {
  background: var(--button-gradient);
  color: var(--button-text);
}
body.light .btn:hover {
  border-color: var(--button-hover-border);
  color: var(--button-text);
}
body.light .btn:focus-visible {
  outline: 2px solid var(--accent-orange);
}

body.light #logoText {
  background: var(--button-gradient);
  -webkit-background-clip: text;
  background-clip: text;
}

body.light .btn-header {
  background: var(--button-gradient-light) !important; /* Use light theme gradient */
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
 
body.light .recipe-item,
body.light .ingredient-item {
  background-color: var(--secondary-bg);
  border: 1px solid var(--accent-blue);
  color: var(--accent-blue);
}
body.light .recipe-item:hover,
body.light .ingredient-item:hover {
  background-color: var(--accent-blue);
  color: var(--primary-bg);
  border-color: var(--accent-blue);
}
body.light .recipe-item.selected {
  background-color: var(--accent-orange);
  color: var(--primary-bg);
  border-color: var(--accent-orange);
}
body.light .recipe-item:focus-visible,
body.light .ingredient-item:focus-visible {
  outline: 2px solid var(--accent-orange);
  background-color: var(--accent-blue);
  color: var(--primary-bg);
  border-color: var(--accent-blue);
}

body.light input,
body.light textarea,
body.light select {
  background-color: var(--secondary-bg);
  color: var(--input-text);
  border: 1px solid var(--accent-blue);
}
body.light ::placeholder {
  color: var(--placeholder-text);
}
body.light input:focus-visible,
body.light textarea:focus-visible,
body.light select:focus-visible {
  outline: 2px solid var(--accent-orange);
  border-color: var(--accent-orange);
}

body.light .container table th,
body.light .container table td {
  background-color: var(--secondary-bg);
  color: var(--text);
  border: 1px solid var(--panel-border);
}

body.light .collapsible-container {
  border: 1px solid var(--panel-border);
  box-shadow: 0 1px 3px var(--shadow);
}
body.light .collapsible-container:hover {
  box-shadow: 0 2px 5px var(--shadow);
}
body.light .collapsible-container[data-color="blue"] { border-left-color: var(--accent-blue); }
body.light .collapsible-container[data-color="orange"] { border-left-color: var(--accent-orange); }
body.light .collapsible-container[data-color="neutral"] { border-left-color: var(--muted-text); }

body.light .collapsible-header {
  background-color: var(--secondary-bg);
  color: var(--text);
}
body.light .collapsible-container[data-color="blue"] .collapsible-header { color: var(--accent-blue); }
body.light .collapsible-container[data-color="orange"] .collapsible-header { color: var(--accent-orange); }
body.light .collapsible-header:hover,
body.light .collapsible-header:focus {
  background-color: var(--panel-bg);
}
body.light .collapsible-header:focus-visible {
  outline: 2px solid var(--accent-blue);
}

body.light .btn-expand-collapse {
  color: var(--text);
}
body.light .btn-expand-collapse:hover {
  background-color: var(--panel-bg);
}
body.light .btn-expand-collapse:hover .label {
  color: var(--accent-blue);
}

body.light .left-column,
body.light .middle-column,
body.light .right-column {
  background-color: var(--secondary-bg);
  border: 1px solid var(--panel-border);
  box-shadow: 0 2px 8px var(--shadow);
}
body.light .left-column { border-top-color: var(--accent-blue); }
body.light .middle-column { border-top-color: var(--accent-blue); }
body.light .right-column { border-top-color: var(--accent-orange); }

body.light .section-title {
  color: var(--text);
}

body.light .ingredients-container {
  background-color: var(--panel-bg);
  border-left-color: var(--accent-blue);
}
body.light .ingredient-list {
  scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
}
body.light .ingredient-list::-webkit-scrollbar-track { background: var(--scrollbar-track); }
body.light .ingredient-list::-webkit-scrollbar-thumb { background-color: var(--scrollbar-thumb); }

body.light .quick-stats-container {
  background-color: var(--panel-bg);
  border-left-color: var(--accent-orange);
}
body.light .stat-item {
  background-color: var(--secondary-bg);
}
body.light .stat-item:hover {
  box-shadow: 0 2px 5px var(--shadow);
}
body.light .stat-label { color: var(--muted-text); }
body.light .stat-value { color: var(--accent-blue); }

body.light .instructions-summary {
  background-color: var(--secondary-bg);
  border-left-color: var(--accent-blue);
  box-shadow: 0 2px 5px var(--shadow);
}
body.light .summary-content {
  background-color: var(--panel-bg);
}

body.light .ingredient-item:hover {
  box-shadow: 0 2px 4px var(--shadow);
}
body.light .ingredient-item.expanded {
  box-shadow: 0 2px 5px var(--shadow);
  border-left-color: var(--accent-blue);
}

body.light .project-header-section {
  box-shadow: 0 4px 8px var(--shadow);
  border: 1px solid var(--panel-border);
  border-bottom: 2px solid var(--panel-border);
}

body.light .iterations-list {
  border: 1px solid var(--panel-border);
}

body.light .new-iteration-form {
  background-color: var(--panel-bg);
  border: 1px solid var(--accent-orange);
}
body.light .new-iteration-form h4 {
  color: var(--accent-orange);
}
body.light .form-group textarea {
  background-color: var(--secondary-bg);
  color: var(--text);
  border: 1px solid var(--panel-border);
}

body.light .btn-primary {
  border: 1px solid var(--accent-blue);
}
body.light .btn-secondary {
  border: 1px solid var(--panel-border);
}

body.light .ingredient-item {
  background-color: var(--secondary-bg);
}

body.light .recipe-title {
  color: var(--text);
  text-shadow: 0 1px 2px var(--shadow);
  background: linear-gradient(45deg, var(--accent-blue), var(--accent-orange));
  -webkit-background-clip: text;
  background-clip: text;
}

body.light .remove-recipe-btn:hover {
  box-shadow: 0 2px 5px var(--shadow);
}

/* Larger Logo Text */
.logo-large {
  font-size: 36px !important; /* Make it significantly larger */
}
/* Header Auth Specific Styles */
#headerAuthContainer #magicLinkForm input,
#headerAuthContainer #magicLinkForm button {
  vertical-align: middle; /* Align items vertically */
}

/* Standardize left column collapsible header text */
.left-column .collapsible-header span {
  font-size: 1em;
}

/* Standardize ALL text in left column */
.left-column,
.left-column * {
  font-size: 1em !important;
}

/* --- Left Column Button Standardization --- */
/* Reset existing button styles in left column */
.left-column .collapsible-header,
.left-column .btn,
.left-column .btn-small,
.left-column .btn-add-recipe,
#btnAddRecipe,
#btnAddGlobalIngredient {
  background-color: transparent !important;
  background-image: var(--button-gradient-dark) !important;
  background-clip: text !important;
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  font-weight: bold !important;
  border: none !important;
  box-shadow: none !important;
  padding: 8px 12px !important;
}

/* Ensure hover states don't add backgrounds */
.left-column .collapsible-header:hover,
.left-column .btn:hover,
.left-column .btn-small:hover,
.left-column .btn-add-recipe:hover,
#btnAddRecipe:hover,
#btnAddGlobalIngredient:hover {
  filter: brightness(1.2);
  background-color: transparent !important;
  border: none !important;
}

/* --- Left Column Standard: Orange text, white accents, no background or outlines --- */
.left-column *,
.left-column .btn,
.left-column button,
.left-column .collapsible-header {
  background: none !important;
  background-image: none !important;
  color: var(--accent-orange-dark) !important;
  border: none !important;
  box-shadow: none !important;
  -webkit-text-fill-color: var(--accent-orange-dark) !important;
  font-weight: bold;
}

/* White accents for icons or secondary elements inside left column */
.left-column .collapsible-icon,
.left-column svg,
.left-column i {
  color: #fff !important;
  fill: #fff !important;
}

/* Hover states: slightly brighter orange */
.left-column .btn:hover,
.left-column button:hover,
.left-column .collapsible-header:hover {
  filter: brightness(1.2);
  background: none !important;
  border: none !important;
}
  /* --- Left Column: Categories, version numbers, titles in white for contrast --- */
.left-column .section-title,
.left-column .version,
.left-column .version-number,
.left-column h2,
.left-column h3,
.left-column h4 {
  color: #fff !important;
  -webkit-text-fill-color: #fff !important;
}

/* Light theme: keep orange text */
body.light .left-column *,
body.light .left-column .btn,
body.light .left-column button,
body.light .left-column .collapsible-header {
  background: none !important;
  background-image: none !important;
  color: var(--accent-orange-light) !important;
  -webkit-text-fill-color: var(--accent-orange-light) !important;
}

body.light .left-column .collapsible-icon,
body.light .left-column svg,
body.light .left-column i {
  color: #fff !important;
  fill: #fff !important;
}

#right-column-actions {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  padding: 1rem;
}

/* Collapsible Panels */
.action-panel {
  border: 1px solid orange;
  border-radius: 5px;
  overflow: hidden;
  background-color: #222;
}

.collapsible-header {
  background-color: #333;
  color: orange;
  padding: 0.5rem 1rem;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: bold;
  user-select: none;
}

.collapsible-header:hover {
  background-color: #444;
}

.collapsible-icon {
  transition: transform 0.3s ease;
}

.collapsible-container[aria-expanded="true"] .collapsible-icon {
  transform: rotate(90deg);
}

.collapsible-content {
  padding: 0 var(--spacing-medium);
  overflow: hidden;
}

/* Input Controls */
.action-input {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 0.5rem 0;
  color: #eee;
}

.slider-control input[type="range"] {
  flex: 1;
}

.toggle-control input[type="checkbox"] {
  transform: scale(1.2);
}

/* Result Display */
.action-result {
  background-color: #333;
  color: #fff;
  padding: 0.5rem;
  margin-top: 0.5rem;
  border-radius: 4px;
  font-size: 0.95em;
  line-height: 1.4;
}

/* ===== Phase 3: Advanced Analysis Panels ===== */

/* PHASE 1: Commented out right column content styles

.right-column .action-panel {
  background-color: var(--panel-bg-dark);
  border: 1px solid var(--accent-orange-dark);
  border-radius: var(--border-radius);
  padding: var(--spacing-medium);
  margin-bottom: var(--spacing-medium);
  box-shadow: 0 2px 6px var(--shadow-dark);
  transition: all 0.3s ease;
}

.right-column .action-panel h3 {
  color: var(--accent-orange-dark);
  margin-bottom: var(--spacing-small);
}

.right-column .action-panel p,
.right-column .action-panel li {
  color: var(--text-dark);
  font-size: 0.95em;
  line-height: 1.4;
}

.right-column .action-panel ul {
  list-style: none;
  padding-left: 0;
  margin: 0;
}

.right-column .action-panel ul li {
  margin-bottom: 0.3em;
  padding-left: 1em;
  position: relative;
}

.right-column .action-panel ul li::before {
  content: "â€¢";
  position: absolute;
  left: 0;
  color: var(--accent-orange-dark);
}

/* Responsive stacking */
@media (max-width: 900px) {
  .right-column {
    order: 3;
    width: 100%;
  }
  .right-column .action-panel {
    width: 100%;
  }
}

/* END PHASE 1 comment block */

/* Settings Panel Styles */
.settings-panel {
  position: absolute;
  top: 100%;
  right: 0;
  width: 280px;
  background-color: var(--color-glass-bg);
  backdrop-filter: blur(10px);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-elevation-medium);
  z-index: 1000;
  overflow: hidden;
  transition: max-height 0.3s ease, opacity 0.3s ease;
  max-height: 0;
  opacity: 0;
}

.settings-panel[aria-expanded="true"] {
  max-height: 500px;
  opacity: 1;
}

.settings-panel .collapsible-content {
  padding: var(--spacing-medium);
}

.settings-section {
  margin-bottom: var(--spacing-medium);
  padding-bottom: var(--spacing-small);
  border-bottom: 1px solid var(--color-border);
}

.settings-section:last-child {
  margin-bottom: 0;
  padding-bottom: 0;
  border-bottom: none;
}

.settings-section h3 {
  font-size: 1rem;
  margin-top: 0;
  margin-bottom: var(--spacing-small);
}

.toggle-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#authControls {
  margin-bottom: var(--spacing-small);
}

#magicLinkForm {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-small);
}

#statusMessages {
  font-size: 0.8em;
  margin-top: var(--spacing-small);
  min-height: 1.2em;
}

#loggedInEmail {
  font-weight: bold;
  margin-right: var(--spacing-small);
}

.settings-icon {
  margin-left: var(--spacing-small);
}

/* Auth status indicator */
.auth-status-indicator {
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  margin-left: 6px;
}
