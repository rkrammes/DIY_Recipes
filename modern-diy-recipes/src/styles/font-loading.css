/**
 * Font loading optimizations
 * These styles provide a better font loading experience
 * by hiding text until fonts are loaded and providing a
 * smooth transition when fonts are ready.
 */

/* Base styles for all themes */
html:not(.fonts-loaded) {
  /* Apply a minimal font loading strategy */
  font-display: swap;
}

/* Gentle fade in when fonts load */
html.fonts-loaded * {
  /* Smooth transition when fonts load */
  animation: fontsFadeIn 0.3s ease-out forwards;
}

/* Hide text flicker during font loading */
html:not(.fonts-loaded) * {
  /* Font rendering optimizations */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Font loading animation */
@keyframes fontsFadeIn {
  0% {
    opacity: 0.8;
  }
  100% {
    opacity: 1;
  }
}

/* System font fallbacks for when web fonts fail to load */
.font-system-fallback {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;
}

.font-mono-fallback {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
}

/* Safe font stacks for specific themes */
[data-theme="hackers"] body:not(.fonts-loaded),
[data-theme="synthwave-noir"] body:not(.fonts-loaded) {
  font-family: system-ui, sans-serif;
}

[data-theme="dystopia"] body:not(.fonts-loaded),
[data-theme="terminal-mono"] body:not(.fonts-loaded) {
  font-family: monospace;
}

[data-theme="neotopia"] body:not(.fonts-loaded),
[data-theme="paper-ledger"] body:not(.fonts-loaded) {
  font-family: system-ui, sans-serif;
}

/* Avoid font layout shifts from web fonts loading */
html:not(.fonts-loaded) body {
  /* Delay rendering until font metrics are calculated */
  opacity: 0.98;
  /* Transition to loaded state */
  transition: opacity 0.2s ease-in-out;
}

html.fonts-loaded body {
  opacity: 1;
}